# Система геотехнического мониторинга

Система для сбора, анализа и визуализации данных с датчиков геотехнического мониторинга зданий и сооружений.

## Описание

Данное приложение позволяет:
- Собирать данные с различных типов датчиков (инклинометры, тензометры, акселерометры и др.)
- Отображать текущие показания датчиков в режиме реального времени
- Визуализировать исторические данные с помощью графиков
- Предсказывать будущие показания датчиков с помощью регрессионных моделей
- Оповещать о выходе показаний за установленные пороги

## Архитектура

Приложение построено по клиент-серверной архитектуре:

### Серверная часть (Flask):
- API для приема данных с датчиков
- База данных для хранения показаний (SQLite)
- Регрессионная модель для предсказаний
- API для передачи данных на фронтенд

### Клиентская часть (React):
- Дашборд для визуализации данных с датчиков
- Графики для отображения исторических данных
- Отображение предсказаний

## Структура проекта

```
geo_monitoring/
│
├── server/                   # Серверная часть на Flask
│   ├── app.py                # Основной файл приложения Flask
│   ├── config.py             # Конфигурации (настройки БД, порты и т.д.)
│   ├── models/               # Модели данных
│   │   ├── __init__.py       
│   │   └── sensor_data.py    # Модель для данных с датчиков
│   ├── api/                  # API эндпоинты
│   │   ├── __init__.py       
│   │   ├── routes.py         # Основные маршруты API
│   │   └── sensor_routes.py  # Маршруты для работы с датчиками
│   ├── services/             # Сервисы для бизнес-логики
│   │   ├── __init__.py       
│   │   ├── data_service.py   # Сервис для работы с данными
│   │   └── prediction_service.py  # Сервис для предсказаний
│   ├── database/             # Настройки базы данных
│   │   ├── __init__.py       
│   │   └── db.py             # Инициализация БД
│   └── utils/                # Вспомогательные функции
│       ├── __init__.py       
│       └── data_generator.py # Генератор синтетических данных
│
├── client/                   # Клиентская часть на React
│   ├── public/               # Публичные файлы
│   │   ├── index.html        
│   │   └── favicon.ico       
│   ├── src/                  # Исходники React
│   │   ├── index.js          # Точка входа React-приложения
│   │   ├── App.js            # Основной компонент приложения
│   │   ├── components/       # React-компоненты
│   │   │   ├── Dashboard.js  # Основной дашборд
│   │   │   ├── SensorCard.js # Карточка отдельного датчика
│   │   │   ├── SensorChart.js# График показаний датчика
│   │   │   └── PredictionView.js # Компонент для отображения предсказаний
│   │   ├── services/         # Сервисы для работы с API
│   │   │   └── api.js        # Функции для вызова API
│   │   └── styles/           # CSS-стили
│   │       ├── App.css       
│   │       └── Dashboard.css 
│   ├── package.json          # Зависимости npm
│   └── README.md             # Инструкции по клиентской части
│
├── requirements.txt          # Зависимости Python
├── .gitignore                # Файлы для игнорирования Git
└── README.md                 # Общая информация о проекте
```

## Установка и запуск

### Предварительные требования
- Python 3.8+
- Node.js 14+
- npm 6+

### Серверная часть

1. Создайте виртуальное окружение:
   ```bash
   python -m venv env
   source env/bin/activate  # Для Linux/Mac
   # или
   env\Scripts\activate  # Для Windows
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Запустите сервер:
   ```bash
   python -m server.app
   ```

   Сервер будет запущен по адресу http://localhost:5000

### Клиентская часть

1. Перейдите в директорию client:
   ```bash
   cd client
   ```

2. Установите зависимости:
   ```bash
   npm install
   ```

3. Запустите клиентское приложение:
   ```bash
   npm start
   ```

   Приложение будет доступно по адресу http://localhost:3000

## Инициализация тестовых данных

При первом запуске система не содержит никаких данных. Для инициализации тестовых данных:

1. Запустите сервер и клиент
2. Откройте приложение в браузере
3. Нажмите кнопку "Инициализировать тестовые данные" на странице дашборда

## API эндпоинты

### Здания
- `GET /api/v1/geo/buildings` - Получить список всех зданий
- `GET /api/v1/geo/buildings/{id}` - Получить информацию о конкретном здании

### Датчики
- `GET /api/v1/geo/sensors` - Получить список всех датчиков
- `GET /api/v1/geo/sensors?building_id={id}` - Получить датчики для конкретного здания
- `GET /api/v1/geo/sensors/{id}` - Получить информацию о конкретном датчике
- `GET /api/v1/geo/sensors/{id}/readings` - Получить показания датчика
- `GET /api/v1/geo/sensors/{id}/predictions` - Получить предсказания для датчика
- `POST /api/v1/geo/sensors/{id}/readings` - Добавить новое показание датчика

### Тревоги
- `GET /api/v1/geo/alerts` - Получить список всех тревог

### Сервисные
- `GET /init-sample-data` - Инициализировать тестовые данные

## Поддерживаемые типы датчиков

- Инклинометры (измеряют наклон)
- Тензометры (измеряют деформацию)
- Акселерометры (измеряют вибрацию)
- Датчики трещин (измеряют ширину трещин)
- Датчики температуры (измеряют температуру окружающей среды)

## Технологии

### Серверная часть
- **Flask** - веб-фреймворк
- **SQLAlchemy** - ORM для работы с базой данных
- **SQLite** - база данных
- **scikit-learn** - библиотека для машинного обучения
- **Flask-CORS** - для обработки CORS-запросов

### Клиентская часть
- **React** - JavaScript-библиотека для создания пользовательских интерфейсов
- **React Router** - маршрутизация на стороне клиента
- **Axios** - HTTP-клиент для выполнения запросов
- **Chart.js** - библиотека для создания графиков
- **React-Bootstrap** - UI-компоненты
- **React-Icons** - иконки

## Расширение системы

### Добавление новых типов датчиков
1. Добавьте новый тип в модель `AlertConfig` в файле `server/models/sensor_data.py`
2. Обновите генератор тестовых данных в `server/utils/data_generator.py`
3. При необходимости, адаптируйте визуализацию в компоненте `SensorCard.js`

### Добавление новых алгоритмов предсказания
1. Расширьте класс `PredictionService` в файле `server/services/prediction_service.py`
2. Добавьте новые методы для различных алгоритмов прогнозирования
3. Обновите API-маршруты в `server/api/sensor_routes.py`

## Автор

Разработчик системы геотехнического мониторинга Макаров М.С.

## Лицензия

MIT